<!-- Search & Filter -->
<div class="px-4 py-2 sticky top-0 z-10 bg-white/30 dark:bg-black/30 backdrop-blur-md border-b border-white/10">
    <div class="flex gap-2">
            <label class="flex flex-col flex-1 h-12">
                <div class="flex w-full flex-1 items-stretch rounded-xl h-full brand-card">
                    <div class="text-text-muted flex border-none bg-accent-soft dark:bg-white/10 items-center justify-center pl-4 rounded-l-xl">
                    <i class="fa-solid fa-magnifying-glass text-gray-500"></i>
                </div>
                <input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-text-main dark:text-white focus:outline-0 focus:ring-0 border-none bg-accent-soft dark:bg-white/10 placeholder:text-gray-500 px-4 rounded-l-none border-l-0 pl-2 text-base font-normal" placeholder="搜尋紀錄" value=""/>
            </div>
        </label>
        <button class="flex size-12 items-center justify-center bg-accent-soft dark:bg-white/10 rounded-xl text-gray-500 hover:bg-accent-soft/80 transition-colors">
            <i class="fa-solid fa-sliders"></i>
        </button>
    </div>
</div>

<!-- Chips -->
<div class="flex gap-3 px-4 py-3 overflow-x-auto hide-scrollbar brand-card mx-4 mb-4">
    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-primary text-white px-4">
        <p class="text-sm font-medium">全部</p>
    </button>
    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-accent-soft dark:bg-white/10 px-4">
        <p class="text-[#1b0d18] dark:text-white text-sm font-medium">最近30天</p>
        <i class="fa-solid fa-chevron-down text-sm"></i>
    </button>
    <button class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-accent-soft dark:bg-white/10 px-4">
        <p class="text-[#1b0d18] dark:text-white text-sm font-medium">服務項目</p>
        <i class="fa-solid fa-chevron-down text-sm"></i>
    </button>
</div>

<!-- Appointment List Content -->
<div class="flex-1 flex flex-col gap-4 p-4" id="history-container">
    <!-- Loading State -->
    <div id="loading-spinner" class="flex flex-col items-center justify-center py-10">
        <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-primary"></div>
        <p class="mt-4 text-gray-500 text-sm">載入歷史紀錄中...</p>
    </div>
    <!-- Dynamic Content -->
</div>

<!-- Template for History Card -->
<template id="history-card-template">
    <div class="flex flex-col items-stretch justify-start rounded-xl shadow-lg bg-white/60 dark:bg-black/60 backdrop-blur-md overflow-hidden border border-white/20 mb-4 history-card brand-card">
        <div class="flex p-4 gap-4">
            <div class="w-24 h-24 bg-center bg-no-repeat bg-cover rounded-lg shrink-0 bg-gray-200" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCMkStRV5clh0STCcvx_LWc9Vpp_VBOkSH_dWLFtqa_sDAyQmRXubyOk5l8Vr9e18QjvMAaGqZ3ete56yz2J5TaYDSUDg4KoVadJig1m9hZX9mtZ_Tz7BD4Qay9WaQ1SDOEQq7BWAt7zynSJ10s6c7SUeQHXA735GkRYttcb9hRiJw9MIkUMhNSGZP5mVphsrJmc82Hx5j-FDHlUzqU1I4UUEiSY488Pc0O_ES_tGYwo9q8VIcT7CFDgwb0dKscUUwvh3PxL2rhDn3O");'></div>
            <div class="flex flex-1 flex-col justify-between">
                <div>
                    <p class="text-[#1b0d18] dark:text-white text-lg font-bold leading-tight stylist-name drop-shadow-sm">設計師名稱</p>
                    <p class="text-purple-600 dark:text-purple-400 text-sm font-normal mt-1 service-info">一般服務 • YYYY-MM-DD</p>
                </div>
                <p class="text-purple-600 dark:text-purple-400 text-base font-bold price-info">NT$ 500</p>
            </div>
        </div>
        <div class="flex px-4 pb-4 gap-3">
            <button class="flex-1 h-10 cursor-pointer items-center justify-center rounded-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white text-sm font-bold shadow-lg shadow-purple-500/30 transition-all active:scale-[0.98] btn-rebook">
                <i class="fa-solid fa-rotate-right mr-1"></i>
                <span>再次預約</span>
            </button>
            <button class="flex-1 h-10 cursor-pointer items-center justify-center rounded-full bg-white/40 dark:bg-white/10 text-[#1b0d18] dark:text-white text-sm font-bold border border-white/20 hover:bg-white/50 transition-all active:scale-[0.98]">
                <i class="fa-regular fa-star mr-1"></i>
                <span>評分與評論</span>
            </button>
        </div>
    </div>
</template>